{
    "sourceFile": "app/debug/page.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1752438533455,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752441109107,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n import { useAuth } from '@/lib/auth-context';\r\n import { getUserTrips } from '@/lib/trip-service';\r\n import { Trip } from '@/types';\r\n import Link from 'next/link';\r\n+import DatabaseTest from '@/components/DatabaseTest';\r\n \r\n export default function DebugPage() {\r\n   const { user, loading } = useAuth();\r\n   const [trips, setTrips] = useState<Trip[]>([]);\r\n@@ -202,8 +203,14 @@\n             </div>\r\n           )}\r\n         </div>\r\n \r\n+        {/* Database Test */}\r\n+        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\r\n+          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Database Connection Test</h2>\r\n+          <DatabaseTest />\r\n+        </div>\r\n+\r\n         {/* Quick Actions */}\r\n         <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\r\n           <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Quick Actions</h2>\r\n           <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n"
                }
            ],
            "date": 1752438533455,
            "name": "Commit-0",
            "content": "'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/lib/auth-context';\r\nimport { getUserTrips } from '@/lib/trip-service';\r\nimport { Trip } from '@/types';\r\nimport Link from 'next/link';\r\n\r\nexport default function DebugPage() {\r\n  const { user, loading } = useAuth();\r\n  const [trips, setTrips] = useState<Trip[]>([]);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!loading && user) {\r\n      loadTrips();\r\n    }\r\n  }, [user, loading]);\r\n\r\n  const loadTrips = async () => {\r\n    if (!user) return;\r\n    \r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      const userTrips = await getUserTrips(user.uid);\r\n      setTrips(userTrips);\r\n    } catch (err) {\r\n      console.error('Error loading trips:', err);\r\n      setError(err instanceof Error ? err.message : 'Failed to load trips');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600\">Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Authentication Required</h2>\r\n          <p className=\"text-gray-600 mb-6\">Please log in to view debug information</p>\r\n          <Link href=\"/login\" className=\"btn-primary\">\r\n            Login\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"bg-white shadow-sm border-b border-gray-200\">\r\n        <div className=\"max-w-7xl mx-auto px-4 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">Debug Information</h1>\r\n            <div className=\"flex space-x-2\">\r\n              <Link href=\"/dashboard\" className=\"btn-secondary\">\r\n                Dashboard\r\n              </Link>\r\n              <Link href=\"/test-map\" className=\"btn-secondary\">\r\n                Test Map\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto p-4 space-y-6\">\r\n        {/* Authentication Info */}\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\r\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Authentication Status</h2>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n              <h3 className=\"font-medium text-gray-900 mb-2\">User Info</h3>\r\n              <div className=\"text-sm space-y-1\">\r\n                <div><span className=\"font-medium\">UID:</span> {user.uid}</div>\r\n                <div><span className=\"font-medium\">Email:</span> {user.email}</div>\r\n                <div><span className=\"font-medium\">Display Name:</span> {user.displayName || 'Not set'}</div>\r\n              </div>\r\n            </div>\r\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n              <h3 className=\"font-medium text-gray-900 mb-2\">Firebase Status</h3>\r\n              <div className=\"text-sm space-y-1\">\r\n                <div><span className=\"font-medium\">Auth State:</span> ✅ Authenticated</div>\r\n                <div><span className=\"font-medium\">Project ID:</span> {process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID}</div>\r\n                <div><span className=\"font-medium\">API Key:</span> {process.env.NEXT_PUBLIC_FIREBASE_API_KEY ? 'Set' : 'Missing'}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Environment Variables */}\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\r\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Environment Variables</h2>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n              <h3 className=\"font-medium text-gray-900 mb-2\">Firebase Config</h3>\r\n              <div className=\"text-sm space-y-1\">\r\n                <div>API Key: {process.env.NEXT_PUBLIC_FIREBASE_API_KEY ? '✅ Set' : '❌ Missing'}</div>\r\n                <div>Auth Domain: {process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN ? '✅ Set' : '❌ Missing'}</div>\r\n                <div>Project ID: {process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID ? '✅ Set' : '❌ Missing'}</div>\r\n                <div>Storage Bucket: {process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET ? '✅ Set' : '❌ Missing'}</div>\r\n                <div>Messaging Sender ID: {process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID ? '✅ Set' : '❌ Missing'}</div>\r\n                <div>App ID: {process.env.NEXT_PUBLIC_FIREBASE_APP_ID ? '✅ Set' : '❌ Missing'}</div>\r\n              </div>\r\n            </div>\r\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n              <h3 className=\"font-medium text-gray-900 mb-2\">Maps Config</h3>\r\n              <div className=\"text-sm space-y-1\">\r\n                <div>Google Maps API Key: {process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY ? '✅ Set' : '❌ Missing'}</div>\r\n                <div>Google Places API Key: {process.env.NEXT_PUBLIC_GOOGLE_PLACES_API_KEY ? '✅ Set' : '❌ Missing'}</div>\r\n                {process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY && (\r\n                  <div>Key Preview: {process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY.substring(0, 20)}...</div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Trip Data */}\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h2 className=\"text-lg font-semibold text-gray-900\">Trip Data</h2>\r\n            <button\r\n              onClick={loadTrips}\r\n              disabled={isLoading}\r\n              className={`btn-secondary ${isLoading ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n            >\r\n              {isLoading ? 'Loading...' : 'Reload Trips'}\r\n            </button>\r\n          </div>\r\n\r\n          {error && (\r\n            <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n              <p className=\"text-red-700 text-sm\">❌ Error: {error}</p>\r\n            </div>\r\n          )}\r\n\r\n          {trips.length === 0 ? (\r\n            <div className=\"text-center py-8 text-gray-500\">\r\n              <p>No trips found in your account.</p>\r\n              <p className=\"text-sm mt-2\">\r\n                <Link href=\"/dashboard\" className=\"text-primary-600 hover:text-primary-700\">\r\n                  Go to Dashboard\r\n                </Link> to create your first trip.\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"text-sm text-gray-600 mb-4\">\r\n                Found {trips.length} trip{trips.length === 1 ? '' : 's'} in your account:\r\n              </div>\r\n              \r\n              {trips.map((trip) => (\r\n                <div key={trip.id} className=\"bg-gray-50 p-4 rounded-lg\">\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"font-medium text-gray-900\">{trip.name}</h3>\r\n                    <div className=\"flex space-x-2\">\r\n                      <Link \r\n                        href={`/trip/${trip.id}`}\r\n                        className=\"text-sm text-primary-600 hover:text-primary-700\"\r\n                      >\r\n                        View Trip\r\n                      </Link>\r\n                      <button\r\n                        onClick={() => navigator.clipboard.writeText(trip.id)}\r\n                        className=\"text-sm text-gray-500 hover:text-gray-700\"\r\n                      >\r\n                        Copy ID\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\r\n                    <div>\r\n                      <span className=\"font-medium\">ID:</span> {trip.id}\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"font-medium\">Location:</span> {trip.location}\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"font-medium\">Dates:</span> {trip.startDate} to {trip.endDate}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"mt-2 text-sm text-gray-600\">\r\n                    <span className=\"font-medium\">Public:</span> {trip.isPublic ? 'Yes' : 'No'} |{' '}\r\n                    <span className=\"font-medium\">Created:</span> {trip.createdAt.toLocaleDateString()}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Quick Actions */}\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\r\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Quick Actions</h2>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            <Link href=\"/test-map\" className=\"btn-secondary text-center\">\r\n              Test Map Functionality\r\n            </Link>\r\n            <Link href=\"/dashboard\" className=\"btn-secondary text-center\">\r\n              Go to Dashboard\r\n            </Link>\r\n            <button\r\n              onClick={() => window.location.reload()}\r\n              className=\"btn-secondary\"\r\n            >\r\n              Reload Page\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} "
        }
    ]
}