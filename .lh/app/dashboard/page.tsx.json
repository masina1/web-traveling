{
    "sourceFile": "app/dashboard/page.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1752425872346,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752432605068,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,13 +1,19 @@\n 'use client';\r\n \r\n import { useAuth } from '@/lib/auth-context';\r\n import { useRouter } from 'next/navigation';\r\n-import { useEffect } from 'react';\r\n+import { useEffect, useState } from 'react';\r\n+import CreateTripForm from '@/components/trip/CreateTripForm';\r\n+import TripList from '@/components/trip/TripList';\r\n+import { Trip } from '@/types';\r\n \r\n export default function Dashboard() {\r\n   const { user, logout, loading } = useAuth();\r\n   const router = useRouter();\r\n+  const [showCreateForm, setShowCreateForm] = useState(false);\r\n+  const [editingTrip, setEditingTrip] = useState<Trip | null>(null);\r\n+  const [refreshTrigger, setRefreshTrigger] = useState(0);\r\n \r\n   useEffect(() => {\r\n     if (!loading && !user) {\r\n       router.push('/login');\r\n"
                },
                {
                    "date": 1752487303724,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n import { useEffect, useState } from 'react';\r\n import CreateTripForm from '@/components/trip/CreateTripForm';\r\n import TripList from '@/components/trip/TripList';\r\n import { Trip } from '@/types';\r\n+import ThemeToggle from '@/components/ui/ThemeToggle';\r\n \r\n export default function Dashboard() {\r\n   const { user, logout, loading } = useAuth();\r\n   const router = useRouter();\r\n@@ -43,8 +44,19 @@\n       console.error('Error logging out:', error);\r\n     }\r\n   };\r\n \r\n+  const handleCreateTripSuccess = (tripId: string) => {\r\n+    setShowCreateForm(false);\r\n+    setRefreshTrigger(prev => prev + 1);\r\n+  };\r\n+\r\n+  const handleEditTrip = (trip: Trip) => {\r\n+    setEditingTrip(trip);\r\n+    // For now, we'll just log this - edit functionality can be added later\r\n+    console.log('Edit trip:', trip);\r\n+  };\r\n+\r\n   return (\r\n     <div className=\"min-h-screen bg-gray-50\">\r\n       <nav className=\"bg-white shadow-sm\">\r\n         <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n@@ -68,51 +80,22 @@\n       </nav>\r\n \r\n       <main className=\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\">\r\n         <div className=\"px-4 py-6 sm:px-0\">\r\n-          <div className=\"text-center\">\r\n-            <h2 className=\"text-3xl font-bold text-gray-900 mb-4\">\r\n-              Welcome to your Dashboard!\r\n-            </h2>\r\n-            <p className=\"text-gray-600 mb-8\">\r\n-              You're successfully logged in. Trip planning features coming soon!\r\n-            </p>\r\n-            \r\n-            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-4xl mx-auto\">\r\n-              <div className=\"card\">\r\n-                <div className=\"text-4xl mb-4\">üó∫Ô∏è</div>\r\n-                <h3 className=\"text-xl font-semibold mb-2\">My Trips</h3>\r\n-                <p className=\"text-gray-600 mb-4\">\r\n-                  Create and manage your travel itineraries\r\n-                </p>\r\n-                <button className=\"btn-primary w-full\" disabled>\r\n-                  Coming Soon\r\n-                </button>\r\n-              </div>\r\n-              \r\n-              <div className=\"card\">\r\n-                <div className=\"text-4xl mb-4\">üìç</div>\r\n-                <h3 className=\"text-xl font-semibold mb-2\">Destinations</h3>\r\n-                <p className=\"text-gray-600 mb-4\">\r\n-                  Add places to visit with maps and details\r\n-                </p>\r\n-                <button className=\"btn-primary w-full\" disabled>\r\n-                  Coming Soon\r\n-                </button>\r\n-              </div>\r\n-              \r\n-              <div className=\"card\">\r\n-                <div className=\"text-4xl mb-4\">üîó</div>\r\n-                <h3 className=\"text-xl font-semibold mb-2\">Share Trips</h3>\r\n-                <p className=\"text-gray-600 mb-4\">\r\n-                  Share your itineraries with friends\r\n-                </p>\r\n-                <button className=\"btn-primary w-full\" disabled>\r\n-                  Coming Soon\r\n-                </button>\r\n-              </div>\r\n+          {showCreateForm ? (\r\n+            <div className=\"max-w-2xl mx-auto\">\r\n+              <CreateTripForm\r\n+                onSuccess={handleCreateTripSuccess}\r\n+                onCancel={() => setShowCreateForm(false)}\r\n+              />\r\n             </div>\r\n-          </div>\r\n+          ) : (\r\n+            <TripList\r\n+              onEditTrip={handleEditTrip}\r\n+              onCreateTrip={() => setShowCreateForm(true)}\r\n+              refreshTrigger={refreshTrigger}\r\n+            />\r\n+          )}\r\n         </div>\r\n       </main>\r\n     </div>\r\n   );\r\n"
                },
                {
                    "date": 1752487313977,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,19 +56,20 @@\n     console.log('Edit trip:', trip);\r\n   };\r\n \r\n   return (\r\n-    <div className=\"min-h-screen bg-gray-50\">\r\n-      <nav className=\"bg-white shadow-sm\">\r\n+    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\r\n+      <nav className=\"bg-white dark:bg-gray-800 shadow-sm\">\r\n         <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n           <div className=\"flex justify-between h-16\">\r\n             <div className=\"flex items-center\">\r\n-              <h1 className=\"text-xl font-semibold text-gray-900\">\r\n+              <h1 className=\"text-xl font-semibold text-gray-900 dark:text-gray-100\">\r\n                 üåç Travel Planner\r\n               </h1>\r\n             </div>\r\n             <div className=\"flex items-center space-x-4\">\r\n-              <span className=\"text-gray-700\">Welcome, {user.displayName}</span>\r\n+              <span className=\"text-gray-700 dark:text-gray-300\">Welcome, {user.displayName}</span>\r\n+              <ThemeToggle />\r\n               <button\r\n                 onClick={handleLogout}\r\n                 className=\"btn-secondary\"\r\n               >\r\n"
                },
                {
                    "date": 1752488494098,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,32 +2,65 @@\n \r\n import { useAuth } from '@/lib/auth-context';\r\n import { useRouter } from 'next/navigation';\r\n import { useEffect, useState } from 'react';\r\n-import CreateTripForm from '@/components/trip/CreateTripForm';\r\n-import TripList from '@/components/trip/TripList';\r\n+import { collection, getDocs, deleteDoc, doc } from 'firebase/firestore';\r\n+import { db } from '@/lib/firebase';\r\n import { Trip } from '@/types';\r\n-import ThemeToggle from '@/components/ui/ThemeToggle';\r\n \r\n export default function Dashboard() {\r\n-  const { user, logout, loading } = useAuth();\r\n+  const { user, loading } = useAuth();\r\n   const router = useRouter();\r\n-  const [showCreateForm, setShowCreateForm] = useState(false);\r\n-  const [editingTrip, setEditingTrip] = useState<Trip | null>(null);\r\n-  const [refreshTrigger, setRefreshTrigger] = useState(0);\r\n+  const [trips, setTrips] = useState<Trip[]>([]);\r\n+  const [loadingTrips, setLoadingTrips] = useState(true);\r\n \r\n   useEffect(() => {\r\n     if (!loading && !user) {\r\n       router.push('/login');\r\n     }\r\n   }, [user, loading, router]);\r\n \r\n-  if (loading) {\r\n+  useEffect(() => {\r\n+    if (user) {\r\n+      fetchTrips();\r\n+    }\r\n+  }, [user]);\r\n+\r\n+  const fetchTrips = async () => {\r\n+    if (!user) return;\r\n+    \r\n+    try {\r\n+      const tripsCollection = collection(db, 'trips');\r\n+      const tripsSnapshot = await getDocs(tripsCollection);\r\n+      const tripsData = tripsSnapshot.docs\r\n+        .map(doc => ({ id: doc.id, ...doc.data() } as Trip))\r\n+        .filter(trip => trip.userId === user.uid);\r\n+      \r\n+      setTrips(tripsData);\r\n+    } catch (error) {\r\n+      console.error('Error fetching trips:', error);\r\n+    } finally {\r\n+      setLoadingTrips(false);\r\n+    }\r\n+  };\r\n+\r\n+  const handleDeleteTrip = async (tripId: string) => {\r\n+    if (!confirm('Are you sure you want to delete this trip?')) return;\r\n+    \r\n+    try {\r\n+      await deleteDoc(doc(db, 'trips', tripId));\r\n+      setTrips(trips.filter(trip => trip.id !== tripId));\r\n+    } catch (error) {\r\n+      console.error('Error deleting trip:', error);\r\n+    }\r\n+  };\r\n+\r\n+  if (loading || loadingTrips) {\r\n     return (\r\n-      <div className=\"min-h-screen flex items-center justify-center\">\r\n+      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n         <div className=\"text-center\">\r\n-          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto\"></div>\r\n-          <p className=\"mt-4 text-gray-600\">Loading...</p>\r\n+          <div className=\"w-12 h-12 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-4\"></div>\r\n+          <p className=\"text-gray-600\">Loading...</p>\r\n         </div>\r\n       </div>\r\n     );\r\n   }\r\n@@ -35,69 +68,83 @@\n   if (!user) {\r\n     return null;\r\n   }\r\n \r\n-  const handleLogout = async () => {\r\n-    try {\r\n-      await logout();\r\n-      router.push('/');\r\n-    } catch (error) {\r\n-      console.error('Error logging out:', error);\r\n-    }\r\n-  };\r\n-\r\n-  const handleCreateTripSuccess = (tripId: string) => {\r\n-    setShowCreateForm(false);\r\n-    setRefreshTrigger(prev => prev + 1);\r\n-  };\r\n-\r\n-  const handleEditTrip = (trip: Trip) => {\r\n-    setEditingTrip(trip);\r\n-    // For now, we'll just log this - edit functionality can be added later\r\n-    console.log('Edit trip:', trip);\r\n-  };\r\n-\r\n   return (\r\n-    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\r\n-      <nav className=\"bg-white dark:bg-gray-800 shadow-sm\">\r\n-        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n-          <div className=\"flex justify-between h-16\">\r\n-            <div className=\"flex items-center\">\r\n-              <h1 className=\"text-xl font-semibold text-gray-900 dark:text-gray-100\">\r\n-                üåç Travel Planner\r\n-              </h1>\r\n-            </div>\r\n-            <div className=\"flex items-center space-x-4\">\r\n-              <span className=\"text-gray-700 dark:text-gray-300\">Welcome, {user.displayName}</span>\r\n-              <ThemeToggle />\r\n+    <div className=\"min-h-screen bg-gray-50\">\r\n+      {/* Header */}\r\n+      <div className=\"bg-white shadow-sm\">\r\n+        <div className=\"container mx-auto px-4 py-4\">\r\n+          <div className=\"flex justify-between items-center\">\r\n+            <h1 className=\"text-2xl font-bold text-gray-900\">My Trips</h1>\r\n+            <div className=\"flex items-center gap-4\">\r\n               <button\r\n-                onClick={handleLogout}\r\n+                onClick={() => router.push('/trip/new')}\r\n+                className=\"btn-primary\"\r\n+              >\r\n+                + Create New Trip\r\n+              </button>\r\n+              <button\r\n+                onClick={() => router.push('/login')}\r\n                 className=\"btn-secondary\"\r\n               >\r\n-                Logout\r\n+                Sign Out\r\n               </button>\r\n             </div>\r\n           </div>\r\n         </div>\r\n-      </nav>\r\n+      </div>\r\n \r\n-      <main className=\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\">\r\n-        <div className=\"px-4 py-6 sm:px-0\">\r\n-          {showCreateForm ? (\r\n-            <div className=\"max-w-2xl mx-auto\">\r\n-              <CreateTripForm\r\n-                onSuccess={handleCreateTripSuccess}\r\n-                onCancel={() => setShowCreateForm(false)}\r\n-              />\r\n-            </div>\r\n-          ) : (\r\n-            <TripList\r\n-              onEditTrip={handleEditTrip}\r\n-              onCreateTrip={() => setShowCreateForm(true)}\r\n-              refreshTrigger={refreshTrigger}\r\n-            />\r\n-          )}\r\n-        </div>\r\n-      </main>\r\n+      {/* Trips Grid */}\r\n+      <div className=\"container mx-auto px-4 py-8\">\r\n+        {trips.length === 0 ? (\r\n+          <div className=\"text-center py-12\">\r\n+            <div className=\"text-6xl mb-4\">üß≥</div>\r\n+            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No trips yet</h3>\r\n+            <p className=\"text-gray-600 mb-6\">Start planning your next adventure!</p>\r\n+            <button\r\n+              onClick={() => router.push('/trip/new')}\r\n+              className=\"btn-primary\"\r\n+            >\r\n+              Create Your First Trip\r\n+            </button>\r\n+          </div>\r\n+        ) : (\r\n+          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n+            {trips.map((trip) => (\r\n+              <div key={trip.id} className=\"card hover:shadow-md transition-shadow\">\r\n+                <div className=\"flex justify-between items-start mb-4\">\r\n+                  <h3 className=\"text-xl font-semibold text-gray-900\">{trip.name}</h3>\r\n+                  <button\r\n+                    onClick={() => handleDeleteTrip(trip.id)}\r\n+                    className=\"text-red-500 hover:text-red-700 text-sm\"\r\n+                  >\r\n+                    Delete\r\n+                  </button>\r\n+                </div>\r\n+                \r\n+                <div className=\"space-y-2 mb-4\">\r\n+                  <p className=\"text-gray-600\">\r\n+                    <span className=\"font-medium\">üìç Location:</span> {trip.location}\r\n+                  </p>\r\n+                  <p className=\"text-gray-600\">\r\n+                    <span className=\"font-medium\">üìÖ Dates:</span> {trip.startDate} - {trip.endDate}\r\n+                  </p>\r\n+                  <p className=\"text-gray-600\">\r\n+                    <span className=\"font-medium\">üë• Visibility:</span> {trip.isPublic ? 'Public' : 'Private'}\r\n+                  </p>\r\n+                </div>\r\n+                \r\n+                <button\r\n+                  onClick={() => router.push(`/trip/${trip.id}`)}\r\n+                  className=\"w-full btn-primary\"\r\n+                >\r\n+                  View & Edit Trip\r\n+                </button>\r\n+              </div>\r\n+            ))}\r\n+          </div>\r\n+        )}\r\n+      </div>\r\n     </div>\r\n   );\r\n } \n\\ No newline at end of file\n"
                }
            ],
            "date": 1752425872346,
            "name": "Commit-0",
            "content": "'use client';\r\n\r\nimport { useAuth } from '@/lib/auth-context';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useEffect } from 'react';\r\n\r\nexport default function Dashboard() {\r\n  const { user, logout, loading } = useAuth();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (!loading && !user) {\r\n      router.push('/login');\r\n    }\r\n  }, [user, loading, router]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return null;\r\n  }\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await logout();\r\n      router.push('/');\r\n    } catch (error) {\r\n      console.error('Error logging out:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <nav className=\"bg-white shadow-sm\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex justify-between h-16\">\r\n            <div className=\"flex items-center\">\r\n              <h1 className=\"text-xl font-semibold text-gray-900\">\r\n                üåç Travel Planner\r\n              </h1>\r\n            </div>\r\n            <div className=\"flex items-center space-x-4\">\r\n              <span className=\"text-gray-700\">Welcome, {user.displayName}</span>\r\n              <button\r\n                onClick={handleLogout}\r\n                className=\"btn-secondary\"\r\n              >\r\n                Logout\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      <main className=\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\">\r\n        <div className=\"px-4 py-6 sm:px-0\">\r\n          <div className=\"text-center\">\r\n            <h2 className=\"text-3xl font-bold text-gray-900 mb-4\">\r\n              Welcome to your Dashboard!\r\n            </h2>\r\n            <p className=\"text-gray-600 mb-8\">\r\n              You're successfully logged in. Trip planning features coming soon!\r\n            </p>\r\n            \r\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-4xl mx-auto\">\r\n              <div className=\"card\">\r\n                <div className=\"text-4xl mb-4\">üó∫Ô∏è</div>\r\n                <h3 className=\"text-xl font-semibold mb-2\">My Trips</h3>\r\n                <p className=\"text-gray-600 mb-4\">\r\n                  Create and manage your travel itineraries\r\n                </p>\r\n                <button className=\"btn-primary w-full\" disabled>\r\n                  Coming Soon\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"card\">\r\n                <div className=\"text-4xl mb-4\">üìç</div>\r\n                <h3 className=\"text-xl font-semibold mb-2\">Destinations</h3>\r\n                <p className=\"text-gray-600 mb-4\">\r\n                  Add places to visit with maps and details\r\n                </p>\r\n                <button className=\"btn-primary w-full\" disabled>\r\n                  Coming Soon\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"card\">\r\n                <div className=\"text-4xl mb-4\">üîó</div>\r\n                <h3 className=\"text-xl font-semibold mb-2\">Share Trips</h3>\r\n                <p className=\"text-gray-600 mb-4\">\r\n                  Share your itineraries with friends\r\n                </p>\r\n                <button className=\"btn-primary w-full\" disabled>\r\n                  Coming Soon\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n} "
        }
    ]
}