{
    "sourceFile": "components/map/MapTest.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1752437071324,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1752437071324,
            "name": "Commit-0",
            "content": "'use client';\r\n\r\nimport { useEffect, useRef, useState } from 'react';\r\n\r\nexport default function MapTest() {\r\n  const mapRef = useRef<HTMLDivElement>(null);\r\n  const [status, setStatus] = useState<string>('Initializing...');\r\n  const [error, setError] = useState<string>('');\r\n\r\n  useEffect(() => {\r\n    const testGoogleMaps = async () => {\r\n      try {\r\n        setStatus('Checking API key...');\r\n        \r\n        // Check if API key exists\r\n        const apiKey = process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY;\r\n        if (!apiKey) {\r\n          throw new Error('NEXT_PUBLIC_GOOGLE_MAPS_API_KEY not found in environment variables');\r\n        }\r\n        \r\n        setStatus('Loading Google Maps API...');\r\n        \r\n        // Load Google Maps script\r\n        const script = document.createElement('script');\r\n        script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=places`;\r\n        script.async = true;\r\n        script.defer = true;\r\n        \r\n        script.onload = () => {\r\n          setStatus('Creating map...');\r\n          \r\n          if (!mapRef.current) {\r\n            setError('Map container not found');\r\n            return;\r\n          }\r\n          \r\n          // Test basic map creation\r\n          const map = new google.maps.Map(mapRef.current, {\r\n            center: { lat: 40.7128, lng: -74.0060 },\r\n            zoom: 10,\r\n          });\r\n          \r\n          // Test marker creation\r\n          const marker = new google.maps.Marker({\r\n            position: { lat: 40.7128, lng: -74.0060 },\r\n            map: map,\r\n            title: 'Test Marker - NYC',\r\n          });\r\n          \r\n          // Test geocoding\r\n          const geocoder = new google.maps.Geocoder();\r\n          geocoder.geocode({ address: 'New York, NY' }, (results, status) => {\r\n            if (status === 'OK') {\r\n              setStatus('✅ All APIs working correctly!');\r\n              setError('');\r\n            } else {\r\n              setError(`Geocoding failed: ${status}`);\r\n            }\r\n          });\r\n        };\r\n        \r\n        script.onerror = () => {\r\n          setError('Failed to load Google Maps script. Check your API key and network connection.');\r\n        };\r\n        \r\n        document.head.appendChild(script);\r\n        \r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'Unknown error occurred');\r\n        setStatus('❌ Setup failed');\r\n      }\r\n    };\r\n\r\n    testGoogleMaps();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-4xl mx-auto\">\r\n      <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-4\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Google Maps API Test</h2>\r\n        \r\n        <div className=\"mb-4\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <div className=\"w-3 h-3 bg-blue-500 rounded-full animate-pulse\"></div>\r\n            <span className=\"text-gray-700\">Status: {status}</span>\r\n          </div>\r\n          \r\n          {error && (\r\n            <div className=\"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n              <p className=\"text-red-700 text-sm\">❌ Error: {error}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"mb-4\">\r\n          <h3 className=\"font-semibold text-gray-900 mb-2\">API Key Check:</h3>\r\n          <div className=\"text-sm text-gray-600\">\r\n            API Key: {process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY ? \r\n              `${process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY.substring(0, 20)}...` : \r\n              '❌ Not found'}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mb-4\">\r\n          <h3 className=\"font-semibold text-gray-900 mb-2\">Required APIs:</h3>\r\n          <ul className=\"text-sm text-gray-600 space-y-1\">\r\n            <li>• Maps JavaScript API</li>\r\n            <li>• Places API (New)</li>\r\n            <li>• Geocoding API</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-4\">\r\n        <h3 className=\"font-semibold text-gray-900 mb-3\">Map Test:</h3>\r\n        <div \r\n          ref={mapRef} \r\n          className=\"w-full h-96 bg-gray-100 rounded-lg\"\r\n          style={{ minHeight: '400px' }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n} "
        }
    ]
}